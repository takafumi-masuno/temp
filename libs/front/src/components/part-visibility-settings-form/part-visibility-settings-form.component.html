<div class="box" [formGroup]="visibilitySettingsForm">
  <h3>公開設定</h3>
  <div class="form-block">
    <div class="form-block-item">
      <p class="form-block-item_title">
        公開開始日
        <span class="label necessary">必須</span>
      </p>

      <input
        type="date"
        name="openStart"
        formControlName="openStart"
        required
        [ngClass]="
          visibilitySettingsForm.controls.openStart.invalid ? 'error' : ''
        "
        (change)="updateForm()"
      />
      <p
        class="error"
        *ngIf="visibilitySettingsForm.controls.openStart.errors?.['required']"
      >
        公開開始日を入力してください。
      </p>
    </div>
    <div class="form-block-item openEnd">
      <p class="form-block-item_title">
        公開終了日
        <span class="label necessary">必須</span>
      </p>
      <ul class="column">
        <li>
          <input
            type="radio"
            name="openEnd"
            formControlName="openEndSelection"
            [value]="false"
            id="noSetOpenEnd"
            required
            [ngClass]="
              visibilitySettingsForm.controls.openEndSelection.value &&
              visibilitySettingsForm.controls.openEnd.invalid
                ? 'error'
                : ''
            "
            (change)="changeStartEndSelection(); updateForm()"
          />
          <label for="noSetOpenEnd">
            <span>指定なし</span>
          </label>
        </li>
        <li>
          <input
            type="radio"
            name="openEnd"
            formControlName="openEndSelection"
            id="openEnd"
            [value]="true"
            required
            [ngClass]="
              visibilitySettingsForm.controls.openEndSelection.value &&
              visibilitySettingsForm.controls.openEnd.invalid
                ? 'error'
                : ''
            "
            (change)="changeStartEndSelection(); updateForm()"
          />
          <label for="openEnd">
            <span>日付を選択する</span>
            <input
              type="date"
              name="openEnd"
              formControlName="openEnd"
              [ngStyle]="{
                opacity: visibilitySettingsForm.controls.openEndSelection.value
                  ? 1
                  : 0.5
              }"
              (change)="changeStartEndSelection(); updateForm()"
            />
          </label>
        </li>
      </ul>
      <p
        class="error"
        *ngIf="
          visibilitySettingsForm.controls.openEndSelection.value &&
          !visibilitySettingsForm.controls.openEnd.value
        "
      >
        公開終了日を選択してください。
      </p>
    </div>
    <div class="form-block-item">
      <p class="form-block-item_title">
        公開状態
        <span class="label necessary">必須</span>
      </p>

      <select
        type="search"
        name="koukaiJoutai"
        formControlName="koukaiJoutai"
        required
        class="mw138"
        (change)="updateForm()"
      >
        <ng-container *ngFor="let option of koukaiJoutaiOptions">
          <option [ngValue]="option.value">{{ option.nm }}</option>
        </ng-container>
      </select>
    </div>
  </div>
</div>
